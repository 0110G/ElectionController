<img src="https://image.flaticon.com/icons/png/512/95/95375.png" alt="drawing" width="200"/>

# ElectionController API #

## Informal ##
As an Indian, I am very much used to seeing elections
now and then. They happen at different scales, ranging
from a small poll to choose class monitor to the
Parliamentry ones. This API is my attempt to simulate
an election on cloud and pave way for digital elections
in the future.

## Introduction ##
This API allows a user to 
1. Create and host a new election
2. Add/Delete required participants to elections.
3. Add multiple posts for an election (for eg. in a 
   colony election, we might have posts for Head, 
   Treasurer... etc)
4. Edit the election
   
   4a. Add/Remove participants
   
   4b. Add/Remove/Refactor Posts
   
   4c. Add/Remove Post contestants

5. And of course **Vote**.


## Endpoints ##

### Create A New Election ###

Takes voter credentials and election configuration, and
registers and returns specified election;

Endpoint: ```/NewElection```

Request Type: ```HTTP_PUT```

Parameters: ```NewElectionQuery```

    Structure NewElectionQuery{
        @Required:
        String voterId;
        String voterPassword;
        
        @Optional
        String electionTitle;
        String electionDescription;
        List<String> registeredVoters;
        List<Post> registeredPost;
    }

    Structure Post{
        @Required
        @NonEmpty List<String> registeredContestants;

        @Optional
        String postDescription;
        WinCriteria winCriteria; /* Default GREATEST_NUMBER_OF_VOTES */
    }

Returns: ```Response```

    Structure Response{
        Integer statusCode;
        String message;
        Election response;
    }
    
    Structure Election{
        String electionTitle;
        @AutoGenerated String electionId;
        String electionDescription;
        String adminVoterId;
        List<Voters> registeredVoters;
        List<Post> availablePost;
    }

    Structure Voters{
        String voterId;
        String voterName;
        @Masked String voterPassword;
    }

Use Cases:
1. To create and host a new election.

Exceptions:
1. When user enters invalid credentials in ```NewElectionQuery```, 
   ```InvalidCredentialException``` is thrown.
2. When user election cannot be registered with database, 
  ```RestrictedActionException``` is thrown.
3. Any other failure, ```InternalFailure``` is thrown.

### Get an existing election ###

Used to get election data of an existing election. 
This operation can be used only if the voter is one of
the eligible voters for the requested election.

Endpoint: ```/GetElection```

Request Type: ```HTTP_GET```

Parameters: ```GetElectionQuery```

    Structure GetElectionQuery{
         @Required
         String voterId;
         String voterPassword;
         String electionId;
    }

Returns: ```Response```

    Structure Response{
         Integer statusCode; 
         String status;
         Election response;
    }

    Structure Election{
         String electionTitle;
         String electionId;
         String electionDescription;
         String adminVoterId;
         List<Voter> eligibleVoters;
         List<Post> availablePost;
    }

    Structure Voter{
         String voterId;
         String voterName;
         String voterPassword;  /* This is masked for outbound endpoints */
         List<Election> electionList; /* This is nulled for outbound endpoints */
    }

    Structure Post{
         String postId;
         String electionId;
         String postDescription;
         List<Voter> contestants;
         Enum WinCriteria; /* Default: GREATEST_NUMBER_OF_VOTES */
         Integer totalContestants;
    }

Use Cases: 

1. To enable any registered voter to look at election.

Exceptions:

1. When user enters Invalid voterId / voterPassword, ```InvalidCredentialException```
   is thrown.
2. When the entered electionId does not exists, ```RestrictedActionException``` is thrown.
3. When user enters valid electionId but is not a part of the registered voterList, ```RestrictedActionException```
   is thrown.
   
### Edit an election ###
**Note**: Any kind of editing to an election can only be done if
the user has Admin rights for that election.

Enabes user to edit election Post, Candidates for Post, Election description,
Registered Voters, ElectionTitle.

  ### a. Edit Election Title ###
   Change the title of an existing election.
   
   Endpoint: ```ChangeElection/ChangeTitle```
   
   Request Type: ```HTTP_POST```

   Parameters: ```ChangeElectionTitleQuery```

    Structure ChangeElectionTitleQuery{
         @Required
         String voterId;
         String voterPassword;
         String electionId;

         @Optional
         String electionTitle;
    }
   
   Returns: ```Response```

    Structure Response{
         Integer statusCode;
         String message;
         Election object;
    }


Will be updated in future commits.

# Todo #
1. The design makes it possible for integrating 
    multiple sql/nosql databases. The current version
   supports only h2 database. Add support for AWS DynamoDB.
